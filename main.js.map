{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-42',\r\n  headers: {\r\n    authorization: 'baf2e86d-8a0c-4d94-956b-24917589976e',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nconst getResponseData = (res) => {\r\n  return res.ok \r\n    ? res.json()\r\n    : Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers\r\n  })\r\n  .then(getResponseData);\r\n};\r\n\r\nexport const renderCard = ({name, link}) => {\r\n  return fetch(`${config.baseUrl}/cards` , {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      link,\r\n    })\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const removeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  })\r\n  .then(getResponseData);\r\n};\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const setUserInfo = ({name, about}) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      about,\r\n    })\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const setUserAvatar = ({avatar}) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar\r\n    })\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const changeLikeCardStatus = (cardId, like) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: like \r\n      ? \"PUT\"\r\n      : \"DELETE\",\r\n    headers: config.headers\r\n  })\r\n  .then((res) => getResponseData(res))\r\n};","import {changeLikeCardStatus} from \"./api\";\r\nimport { removeCard } from \"./api\";\r\n\r\nexport function likeCard(cardId, likeButton, likesCounter) {\r\n  const isLiked = likeButton.classList.contains('card__like-button_is-active');\r\n  changeLikeCardStatus(cardId, !isLiked)\r\n    .then((dataCard) => {\r\n      likeButton.classList.toggle('card__like-button_is-active');\r\n      likesCounter.textContent = dataCard.likes.length;\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка изменения статуса лайка: ${err}`)\r\n    })\r\n}\r\n\r\nexport function deleteCard(cardId, cardElement) {\r\n  removeCard(cardId, cardElement) \r\n    .then(() => {\r\n    cardElement.remove()\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось удалить карточку: ${err}`);\r\n    })\r\n  }\r\n\r\nexport function createCard(dataCard, { onDeleteCard, onLikeIcon, onPreviewPicture }, userId) {\r\n    \r\n  const cardTemplate = document.querySelector('#card-template').content;\r\n  const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  const cardImage = cardElement.querySelector('.card__image');\r\n  const deleteButton = cardElement.querySelector('.card__delete-button');\r\n  const likeButton = cardElement.querySelector('.card__like-button');\r\n  const likesCounter = cardElement.querySelector('.likes-counter');\r\n  const zoomImg = cardElement.querySelector('.card__image');\r\n  \r\n  cardElement.querySelector('.card__title').textContent = dataCard.name;\r\n  cardImage.src = dataCard.link;\r\n  cardImage.alt = dataCard.name;\r\n\r\n  const isLiked = dataCard.likes.some((like) => like._id === userId);\r\n  \r\n  if (isLiked) \r\n    likeButton.classList.add('card__like-button_is-active');\r\n    likesCounter.textContent = dataCard.likes.length;\r\n\r\n  if (dataCard.owner._id === userId && onDeleteCard) {\r\n    deleteButton.addEventListener('click', () => {\r\n      onDeleteCard(dataCard._id, cardElement);\r\n    })\r\n  } else {\r\n    deleteButton.remove();\r\n  }\r\n\r\n  if (onLikeIcon) {\r\n    likeButton.addEventListener('click', () => \r\n      onLikeIcon(dataCard._id, likeButton, likesCounter)\r\n    );\r\n    \r\n  }\r\n\r\n  if (onPreviewPicture) {\r\n    zoomImg.addEventListener('click', () => {\r\n      onPreviewPicture(dataCard.link, dataCard.name);\r\n    })\r\n  }\r\n\r\n  return cardElement;\r\n}\r\n\r\n","export function openPopup(form) {\r\n  form.classList.add(\"popup_is-opened\");\r\n  closeKeyEscapeAdd(form);\r\n}\r\n\r\nexport function closePopup(form) {\r\n  document.removeEventListener(\"keydown\", closeKeyEscape);\r\n  form.classList.remove(\"popup_is-opened\");\r\n}\r\n\r\nconst closeKeyEscape = (evt) => {\r\n  const openedPopup = document.querySelector(\".popup_is-opened\");\r\n  if (evt.key === \"Escape\") {\r\n    closePopup(openedPopup);\r\n  }\r\n};\r\nconst closeKeyEscapeAdd = (form) => {\r\n  document.addEventListener(\"keydown\", closeKeyEscape);\r\n};\r\n","function showInputError(\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationConfig\r\n) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n}\r\n\r\nfunction hideInputError(formElement, inputElement, validationConfig) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = \"\";\r\n}\r\n\r\nfunction isValid(formElement, inputElement, validationConfig) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationConfig\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n}\r\n\r\nconst disableSubmitButton = ((buttonElement, validationConfig) => {\r\n  buttonElement.disabled = true;\r\n  buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n})\r\n\r\nconst enableSubmitButton = ((buttonElement, validationConfig) => {\r\n  buttonElement.disabled = false;\r\n  buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n})\r\n\r\nfunction toggleButtonState(inputList, buttonElement, validationConfig) {\r\n  if (hasInvalidInput(inputList)) {\r\n    disableSubmitButton(buttonElement, validationConfig);\r\n  } else {\r\n    enableSubmitButton(buttonElement, validationConfig);\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement, validationConfig) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}\r\n\r\nexport function enableValidation(validationConfig) {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationConfig.formSelector)\r\n  );\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n}\r\n\r\nexport function clearValidation(formElement, validationConfig) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    isValid(formElement, inputElement, validationConfig);\r\n  });\r\n\r\n  const buttonElement = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n  toggleButtonState(inputList, buttonElement, validationConfig)\r\n}\r\n","import './pages/index.css';\r\nimport {createCard} from './components/card.js';\r\nimport {deleteCard} from './components/card.js';\r\nimport {likeCard} from './components/card.js';\r\nimport {openPopup} from './components/modal.js';\r\nimport {closePopup} from './components/modal.js';\r\nimport {enableValidation} from './components/validation.js';\r\nimport {clearValidation} from './components/validation.js';\r\nimport {getInitialCards} from './components/api.js';\r\nimport {getUserInfo} from './components/api.js';\r\nimport {renderCard} from './components/api.js';\r\nimport {setUserInfo} from './components/api.js';\r\nimport {setUserAvatar} from './components/api.js';\r\n\r\nconst placesList = document.querySelector('.places__list');\r\n\r\nconst profile = document.querySelector('.profile');\r\nconst editAvatar = document.querySelector('.profile__image')\r\nconst editButton = profile.querySelector('.profile__edit-button');\r\nconst addButton = profile.querySelector('.profile__add-button');\r\nconst profileName = profile.querySelector('.profile__title');\r\nconst profileDescription = profile.querySelector('.profile__description');\r\n\r\nconst popupEditAvatar = document.querySelector('.popup_type_new-avatar');\r\nconst popupEdit = document.querySelector('.popup_type_edit');\r\nconst popupAddCard = document.querySelector('.popup_type_new-card');\r\nconst popupImage = document.querySelector('.popup_type_image');\r\n\r\nconst formEditAvatar = popupEditAvatar.querySelector('.popup__form'); \r\nconst formEdit = popupEdit.querySelector('.popup__form');\r\nconst formAdd = popupAddCard.querySelector('.popup__form');\r\n\r\nconst avatarInputEdit = formEditAvatar.querySelector('.popup__input_type_avatar_url');\r\n\r\nconst nameInputEdit = formEdit.querySelector('.popup__input_type_name');\r\nconst descriptionInputEdit = formEdit.querySelector('.popup__input_type_description');\r\n\r\nconst inputPlace = popupAddCard.querySelector('.popup__input_type_card-name');\r\nconst inputUrl = popupAddCard.querySelector('.popup__input_type_url');\r\n\r\nconst imagePopupImg = popupImage.querySelector('.popup__image');\r\nconst imagePopupCaption = popupImage.querySelector('.popup__caption');\r\n\r\nconst popups = document.querySelectorAll('.popup');\r\n\r\nconst editAvatarSubmitButton = formEditAvatar.querySelector('.popup__button');\r\nconst editSubmitButton = formEdit.querySelector('.popup__button');\r\nconst addSubmitButton = formAdd.querySelector('.popup__button');\r\n\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__input-error_visible'\r\n};\r\n\r\nconst defaultSubmitButtonText = 'Сохранить';\r\nconst updateSubmitButtonText  = 'Сохранение...';\r\n\r\nlet userId = null;\r\n\r\npopups.forEach((element) => {\r\n  element.querySelector('.popup__close').addEventListener('click', () => {\r\n    closePopup(element);\r\n  });\r\n\r\n  element.addEventListener('mousedown', (evt) => {\r\n    if (evt.target.classList.contains('popup')) {\r\n      closePopup(element);\r\n    }\r\n  });\r\n})\r\n\r\nfunction zoomCard(link, name) {\r\n  imagePopupImg.src = link;\r\n  imagePopupImg.alt = name;\r\n  imagePopupCaption.textContent = name;\r\n  openPopup(popupImage);\r\n}\r\n\r\nenableValidation(validationConfig);\r\n\r\neditAvatar.addEventListener('click', () => {\r\n  openPopup(popupEditAvatar);\r\n  resetPopup(popupEditAvatar);\r\n  clearValidation(formEdit, validationConfig);\r\n})\r\n\r\neditButton.addEventListener('click', () => {\r\n  openPopup(popupEdit);\r\n  nameInputEdit.value = profileName.textContent;\r\n  descriptionInputEdit.value = profileDescription.textContent;\r\n  clearValidation(formEdit, validationConfig);\r\n})\r\n\r\naddButton.addEventListener('click', () => {\r\n  openPopup(popupAddCard);\r\n  resetPopup(popupAddCard);\r\n  clearValidation(formAdd, validationConfig);\r\n})\r\n\r\nfunction resetPopup(form) {\r\n  if (form.querySelector('.popup__form')) {\r\n    form.querySelector('.popup__form').reset();\r\n  }\r\n}\r\n\r\nconst setLoadingState = (button, isLoading, buttonText, loadingText) => {\r\n  if (isLoading) {\r\n    button.textContent = loadingText;\r\n    button.disabled = true;\r\n  } else {\r\n    button.textContent = buttonText;\r\n    button.disabled = false;\r\n  }\r\n}\r\n\r\nfunction handleFormEditAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  setLoadingState(editAvatarSubmitButton, true, defaultSubmitButtonText, updateSubmitButtonText);\r\n\r\n  setUserAvatar({avatar: avatarInputEdit.value}) \r\n    .then((res) => {\r\n      editAvatar.style.backgroundImage = `url(${res.avatar})`;\r\n      setLoadingState(editAvatarSubmitButton, false, defaultSubmitButtonText, updateSubmitButtonText);\r\n      closePopup(popupEditAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось обновить аватар: ${err}`);\r\n    })\r\n};\r\n\r\nfunction handleFormEditSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  setLoadingState(editSubmitButton, true, defaultSubmitButtonText, updateSubmitButtonText);\r\n\r\n  setUserInfo({name: nameInputEdit.value, about: descriptionInputEdit.value})\r\n    .then((res) => {\r\n      profileName.textContent = res.name;  \r\n      profileDescription.textContent = res.about;\r\n      setLoadingState(editSubmitButton, false, defaultSubmitButtonText, updateSubmitButtonText);\r\n      closePopup(popupEdit);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось обновить данные профиля: ${err}`);\r\n    }) \r\n};\r\n\r\nfunction handleFormAddSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  setLoadingState(addSubmitButton, true, defaultSubmitButtonText, updateSubmitButtonText);\r\n\r\n  renderCard({name: inputPlace.value, link: inputUrl.value})\r\n    .then((dataCard) => {\r\n      const addCard = createCard(\r\n        dataCard, \r\n        {\r\n          onDeleteCard: deleteCard,\r\n          onLikeIcon: likeCard, \r\n          onPreviewPicture: zoomCard,\r\n        }, \r\n        userId\r\n      );\r\n      setLoadingState(addSubmitButton, false, defaultSubmitButtonText, updateSubmitButtonText);\r\n      placesList.prepend(addCard);\r\n      closePopup(popupAddCard);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось создать новую карточку: ${err}`);\r\n    })\r\n};\r\n\r\nformEditAvatar.addEventListener('submit', handleFormEditAvatarSubmit);\r\nformEdit.addEventListener('submit', handleFormEditSubmit);\r\nformAdd.addEventListener('submit', handleFormAddSubmit);\r\n\r\nPromise.all([getInitialCards(), getUserInfo()])\r\n  .then(([cards, user]) => {\r\n    userId = user._id;\r\n    profileName.textContent = user.name;\r\n    profileDescription.textContent = user.about;\r\n    editAvatar.style.backgroundImage = `url(${user.avatar})`;\r\n    formAdd.addEventListener('submit', handleFormAddSubmit);\r\n    cards.forEach((dataCard) => {\r\n      const addCards = createCard(\r\n        dataCard, \r\n        {\r\n          onDeleteCard: deleteCard,\r\n          onLikeIcon: likeCard, \r\n          onPreviewPicture: zoomCard,\r\n        }, \r\n        userId\r\n        \r\n      );\r\n      placesList.append(addCards);\r\n      \r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.log(`Ошибка при загрузке: ${err}`);\r\n  })\r\n\r\n\r\n  \r\n "],"names":["config","baseUrl","headers","authorization","getResponseData","res","ok","json","Promise","reject","concat","status","likeCard","cardId","likeButton","likesCounter","like","fetch","method","then","changeLikeCardStatus","classList","contains","dataCard","toggle","textContent","likes","length","catch","err","console","log","deleteCard","cardElement","removeCard","remove","createCard","_ref","userId","onDeleteCard","onLikeIcon","onPreviewPicture","document","querySelector","content","cloneNode","cardImage","deleteButton","zoomImg","name","src","link","alt","some","_id","add","owner","addEventListener","openPopup","form","closeKeyEscapeAdd","closePopup","removeEventListener","closeKeyEscape","evt","openedPopup","key","isValid","formElement","inputElement","validationConfig","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","errorElement","id","inputErrorClass","errorClass","hideInputError","showInputError","validationMessage","toggleButtonState","inputList","buttonElement","hasInvalidInput","disabled","inactiveButtonClass","enableSubmitButton","disableSubmitButton","clearValidation","Array","from","querySelectorAll","inputSelector","forEach","submitButtonSelector","placesList","profile","editAvatar","editButton","addButton","profileName","profileDescription","popupEditAvatar","popupEdit","popupAddCard","popupImage","formEditAvatar","formEdit","formAdd","avatarInputEdit","nameInputEdit","descriptionInputEdit","inputPlace","inputUrl","imagePopupImg","imagePopupCaption","popups","editAvatarSubmitButton","editSubmitButton","addSubmitButton","formSelector","defaultSubmitButtonText","updateSubmitButtonText","zoomCard","resetPopup","reset","element","target","setEventListeners","enableValidation","value","setLoadingState","button","isLoading","buttonText","loadingText","handleFormAddSubmit","preventDefault","body","JSON","stringify","addCard","prepend","_ref3","avatar","style","backgroundImage","_ref2","about","all","cards","user","addCards","append"],"sourceRoot":""}