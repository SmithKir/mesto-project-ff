{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-42',\r\n  headers: {\r\n    authorization: 'baf2e86d-8a0c-4d94-956b-24917589976e',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nconst getResponseData = (res) => {\r\n  return res.ok \r\n    ? res.json()\r\n    : Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers\r\n  })\r\n  .then(getResponseData);\r\n};\r\n\r\nexport const renderCard = ({name, link}) => {\r\n  return fetch(`${config.baseUrl}/cards` , {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      link,\r\n    })\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const removeCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  })\r\n  .then(getResponseData);\r\n};\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const setUserInfo = ({name, about}) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name,\r\n      about,\r\n    })\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const setUserAvatar = ({avatar}) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar\r\n    })\r\n  })\r\n  .then(getResponseData)\r\n};\r\n\r\nexport const changeLikeCardStatus = (cardId, like) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: like \r\n      ? \"PUT\"\r\n      : \"DELETE\",\r\n    headers: config.headers\r\n  })\r\n  .then((res) => getResponseData(res))\r\n};","import {changeLikeCardStatus} from \"./api\";\r\nimport { removeCard } from \"./api\";\r\n\r\nexport function likeCard(cardId, likeButton, likesCounter) {\r\n  const isLiked = likeButton.classList.contains('card__like-button_is-active');\r\n  changeLikeCardStatus(cardId, !isLiked)\r\n    .then((dataCard) => {\r\n      likeButton.classList.toggle('card__like-button_is-active');\r\n      likesCounter.textContent = dataCard.likes.length;\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка изменения статуса лайка: ${err}`)\r\n    })\r\n}\r\n\r\nexport function deleteCard(cardId, cardElement) {\r\n  removeCard(cardId, cardElement) \r\n    .then(() => {\r\n    cardElement.remove()\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось удалить карточку: ${err}`);\r\n    })\r\n  }\r\n\r\nexport function createCard(dataCard, { onDeleteCard, onLikeIcon, onPreviewPicture }, userId) {\r\n    \r\n  const cardTemplate = document.querySelector('#card-template').content;\r\n  const cardElement = cardTemplate.querySelector('.places__item').cloneNode(true);\r\n  const cardImage = cardElement.querySelector('.card__image');\r\n  const deleteButton = cardElement.querySelector('.card__delete-button');\r\n  const likeButton = cardElement.querySelector('.card__like-button');\r\n  const likesCounter = cardElement.querySelector('.likes-counter');\r\n  const zoomImg = cardElement.querySelector('.card__image');\r\n  \r\n  cardElement.querySelector('.card__title').textContent = dataCard.name;\r\n  cardImage.src = dataCard.link;\r\n  cardImage.alt = dataCard.name;\r\n\r\n  const isLiked = dataCard.likes.some((like) => like._id === userId);\r\n  \r\n  if (isLiked) \r\n    likeButton.classList.add('card__like-button_is-active');\r\n    likesCounter.textContent = dataCard.likes.length;\r\n\r\n  if (dataCard.owner._id === userId && onDeleteCard) {\r\n    deleteButton.addEventListener('click', () => {\r\n      onDeleteCard(dataCard._id, cardElement);\r\n    })\r\n  } else {\r\n    deleteButton.remove();\r\n  }\r\n\r\n  if (onLikeIcon) {\r\n    likeButton.addEventListener('click', () => \r\n      onLikeIcon(dataCard._id, likeButton, likesCounter)\r\n    );\r\n    \r\n  }\r\n\r\n  if (onPreviewPicture) {\r\n    zoomImg.addEventListener('click', () => {\r\n      onPreviewPicture(dataCard.link, dataCard.name);\r\n    })\r\n  }\r\n\r\n  return cardElement;\r\n}\r\n\r\n","export function openPopup(form) {\r\n  form.classList.add(\"popup_is-opened\");\r\n  closeKeyEscapeAdd(form);\r\n}\r\n\r\nexport function closePopup(form) {\r\n  document.removeEventListener(\"keydown\", closeKeyEscape);\r\n  form.classList.remove(\"popup_is-opened\");\r\n}\r\n\r\nconst closeKeyEscape = (evt) => {\r\n  const openedPopup = document.querySelector(\".popup_is-opened\");\r\n  if (evt.key === \"Escape\") {\r\n    closePopup(openedPopup);\r\n  }\r\n};\r\nconst closeKeyEscapeAdd = (form) => {\r\n  document.addEventListener(\"keydown\", closeKeyEscape);\r\n};\r\n","function showInputError(\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationConfig\r\n) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n}\r\n\r\nfunction hideInputError(formElement, inputElement, validationConfig) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = \"\";\r\n}\r\n\r\nfunction isValid(formElement, inputElement, validationConfig) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationConfig\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n}\r\n\r\nconst disableSubmitButton = (buttonElement, validationConfig) => {\r\n  buttonElement.disabled = true;\r\n  buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n};\r\n\r\nconst enableSubmitButton = (buttonElement, validationConfig) => {\r\n  buttonElement.disabled = false;\r\n  buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n};\r\n\r\nfunction toggleButtonState(inputList, buttonElement, validationConfig) {\r\n  if (hasInvalidInput(inputList)) {\r\n    disableSubmitButton(buttonElement, validationConfig);\r\n  } else {\r\n    enableSubmitButton(buttonElement, validationConfig);\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement, validationConfig) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, validationConfig);\r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}\r\n\r\nexport function enableValidation(validationConfig) {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationConfig.formSelector)\r\n  );\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n}\r\n\r\nexport function clearValidation(formElement, validationConfig) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  });\r\n\r\n  const buttonElement = formElement.querySelector(\r\n    validationConfig.submitButtonSelector\r\n  );\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n}\r\n","import './pages/index.css';\r\nimport {createCard} from './components/card.js';\r\nimport {deleteCard} from './components/card.js';\r\nimport {likeCard} from './components/card.js';\r\nimport {openPopup} from './components/modal.js';\r\nimport {closePopup} from './components/modal.js';\r\nimport {enableValidation} from './components/validation.js';\r\nimport {clearValidation} from './components/validation.js';\r\nimport {getInitialCards} from './components/api.js';\r\nimport {getUserInfo} from './components/api.js';\r\nimport {renderCard} from './components/api.js';\r\nimport {setUserInfo} from './components/api.js';\r\nimport {setUserAvatar} from './components/api.js';\r\n\r\nconst placesList = document.querySelector('.places__list');\r\n\r\nconst profile = document.querySelector('.profile');\r\nconst editAvatar = document.querySelector('.profile__image')\r\nconst editButton = profile.querySelector('.profile__edit-button');\r\nconst addButton = profile.querySelector('.profile__add-button');\r\nconst profileName = profile.querySelector('.profile__title');\r\nconst profileDescription = profile.querySelector('.profile__description');\r\n\r\nconst popupEditAvatar = document.querySelector('.popup_type_new-avatar');\r\nconst popupEdit = document.querySelector('.popup_type_edit');\r\nconst popupAddCard = document.querySelector('.popup_type_new-card');\r\nconst popupImage = document.querySelector('.popup_type_image');\r\n\r\nconst formEditAvatar = popupEditAvatar.querySelector('.popup__form'); \r\nconst formEdit = popupEdit.querySelector('.popup__form');\r\nconst formAdd = popupAddCard.querySelector('.popup__form');\r\n\r\nconst avatarInputEdit = formEditAvatar.querySelector('.popup__input_type_avatar_url');\r\n\r\nconst nameInputEdit = formEdit.querySelector('.popup__input_type_name');\r\nconst descriptionInputEdit = formEdit.querySelector('.popup__input_type_description');\r\n\r\nconst inputPlace = popupAddCard.querySelector('.popup__input_type_card-name');\r\nconst inputUrl = popupAddCard.querySelector('.popup__input_type_url');\r\n\r\nconst imagePopupImg = popupImage.querySelector('.popup__image');\r\nconst imagePopupCaption = popupImage.querySelector('.popup__caption');\r\n\r\nconst popups = document.querySelectorAll('.popup');\r\n\r\nconst editAvatarSubmitButton = formEditAvatar.querySelector('.popup__button');\r\nconst editSubmitButton = formEdit.querySelector('.popup__button');\r\nconst addSubmitButton = formAdd.querySelector('.popup__button');\r\n\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__input-error_visible'\r\n};\r\n\r\nconst defaultSubmitButtonText = 'Сохранить';\r\nconst updateSubmitButtonText  = 'Сохранение...';\r\n\r\nlet userId = null;\r\n\r\npopups.forEach((element) => {\r\n  element.querySelector('.popup__close').addEventListener('click', () => {\r\n    closePopup(element);\r\n  });\r\n\r\n  element.addEventListener('mousedown', (evt) => {\r\n    if (evt.target.classList.contains('popup')) {\r\n      closePopup(element);\r\n    }\r\n  });\r\n})\r\n\r\nfunction zoomCard(link, name) {\r\n  imagePopupImg.src = link;\r\n  imagePopupImg.alt = name;\r\n  imagePopupCaption.textContent = name;\r\n  openPopup(popupImage);\r\n}\r\n\r\n\r\n\r\neditAvatar.addEventListener('click', () => {\r\n  openPopup(popupEditAvatar);\r\n  resetPopup(popupEditAvatar);\r\n  clearValidation(formEditAvatar, validationConfig);\r\n})\r\n\r\neditButton.addEventListener('click', () => {\r\n  openPopup(popupEdit);\r\n  nameInputEdit.value = profileName.textContent;\r\n  descriptionInputEdit.value = profileDescription.textContent;\r\n  clearValidation(formEdit, validationConfig);\r\n})\r\n\r\naddButton.addEventListener('click', () => {\r\n  openPopup(popupAddCard);\r\n  resetPopup(popupAddCard);\r\n  clearValidation(formAdd, validationConfig);\r\n})\r\n\r\nfunction resetPopup(form) {\r\n  if (form.querySelector('.popup__form')) {\r\n    form.querySelector('.popup__form').reset();\r\n  }\r\n}\r\n\r\nconst setLoadingState = (button, isLoading, buttonText, loadingText) => {\r\n  if (isLoading) {\r\n    button.textContent = loadingText;\r\n    button.disabled = true;\r\n  } else {\r\n    button.textContent = buttonText;\r\n    button.disabled = false;\r\n  }\r\n}\r\n\r\nfunction handleFormEditAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  setLoadingState(editAvatarSubmitButton, true, defaultSubmitButtonText, updateSubmitButtonText);\r\n\r\n  setUserAvatar({avatar: avatarInputEdit.value}) \r\n    .then((res) => {\r\n      editAvatar.style.backgroundImage = `url(${res.avatar})`;\r\n      closePopup(popupEditAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось обновить аватар: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      setLoadingState(editAvatarSubmitButton, false, defaultSubmitButtonText, updateSubmitButtonText);\r\n    })\r\n};\r\n\r\nfunction handleFormEditSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  setLoadingState(editSubmitButton, true, defaultSubmitButtonText, updateSubmitButtonText);\r\n\r\n  setUserInfo({name: nameInputEdit.value, about: descriptionInputEdit.value})\r\n    .then((res) => {\r\n      profileName.textContent = res.name;  \r\n      profileDescription.textContent = res.about;\r\n      closePopup(popupEdit);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось обновить данные профиля: ${err}`);\r\n    }) \r\n    .finally(() => {\r\n      setLoadingState(editSubmitButton, false, defaultSubmitButtonText, updateSubmitButtonText);\r\n    })\r\n};\r\n\r\nfunction handleFormAddSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  setLoadingState(addSubmitButton, true, defaultSubmitButtonText, updateSubmitButtonText);\r\n\r\n  renderCard({name: inputPlace.value, link: inputUrl.value})\r\n    .then((dataCard) => {\r\n      const addCard = createCard(\r\n        dataCard, \r\n        {\r\n          onDeleteCard: deleteCard,\r\n          onLikeIcon: likeCard, \r\n          onPreviewPicture: zoomCard,\r\n        }, \r\n        userId\r\n      );\r\n      placesList.prepend(addCard);\r\n      closePopup(popupAddCard);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Не удалось создать новую карточку: ${err}`);\r\n    })\r\n    .finally(() => {\r\n      setLoadingState(addSubmitButton, false, defaultSubmitButtonText, updateSubmitButtonText);\r\n    })\r\n};\r\n\r\nformEditAvatar.addEventListener('submit', handleFormEditAvatarSubmit);\r\nformEdit.addEventListener('submit', handleFormEditSubmit);\r\nformAdd.addEventListener('submit', handleFormAddSubmit);\r\n\r\nPromise.all([getInitialCards(), getUserInfo()])\r\n  .then(([cards, user]) => {\r\n    userId = user._id;\r\n    profileName.textContent = user.name;\r\n    profileDescription.textContent = user.about;\r\n    editAvatar.style.backgroundImage = `url(${user.avatar})`;\r\n    cards.forEach((dataCard) => {\r\n      const addCards = createCard(\r\n        dataCard, \r\n        {\r\n          onDeleteCard: deleteCard,\r\n          onLikeIcon: likeCard, \r\n          onPreviewPicture: zoomCard,\r\n        }, \r\n        userId\r\n        \r\n      );\r\n      placesList.append(addCards);\r\n      \r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.log(`Ошибка при загрузке: ${err}`);\r\n  })\r\n\r\n\r\n  enableValidation(validationConfig);\r\n "],"names":["config","baseUrl","headers","authorization","getResponseData","res","ok","json","Promise","reject","concat","status","likeCard","cardId","likeButton","likesCounter","like","fetch","method","then","changeLikeCardStatus","classList","contains","dataCard","toggle","textContent","likes","length","catch","err","console","log","deleteCard","cardElement","removeCard","remove","createCard","_ref","userId","onDeleteCard","onLikeIcon","onPreviewPicture","document","querySelector","content","cloneNode","cardImage","deleteButton","zoomImg","name","src","link","alt","some","_id","add","owner","addEventListener","openPopup","form","closeKeyEscapeAdd","closePopup","removeEventListener","closeKeyEscape","evt","openedPopup","key","hideInputError","formElement","inputElement","validationConfig","errorElement","id","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","enableSubmitButton","disableSubmitButton","clearValidation","Array","from","querySelectorAll","inputSelector","forEach","submitButtonSelector","placesList","profile","editAvatar","editButton","addButton","profileName","profileDescription","popupEditAvatar","popupEdit","popupAddCard","popupImage","formEditAvatar","formEdit","formAdd","avatarInputEdit","nameInputEdit","descriptionInputEdit","inputPlace","inputUrl","imagePopupImg","imagePopupCaption","popups","editAvatarSubmitButton","editSubmitButton","addSubmitButton","formSelector","defaultSubmitButtonText","updateSubmitButtonText","zoomCard","resetPopup","reset","element","target","value","setLoadingState","button","isLoading","buttonText","loadingText","_ref3","avatar","preventDefault","body","JSON","stringify","style","backgroundImage","finally","_ref2","about","addCard","prepend","all","cards","user","addCards","append","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","enableValidation"],"sourceRoot":""}